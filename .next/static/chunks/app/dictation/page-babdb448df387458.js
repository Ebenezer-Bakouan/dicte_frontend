(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[872],{4684:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(5155),l=t(2115),r=t(5695);function i(e){let{children:a,requireAdmin:t=!1}=e,i=(0,r.useRouter)(),[n,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>localStorage.getItem("token")?t&&"bakouanebenezer00@gmail.com"!==localStorage.getItem("userEmail")?void i.push("/dictation"):void o(!1):void i.push("/auth/login"),[i,t]),n)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,s.jsx)(s.Fragment,{children:a})}},6051:(e,a,t)=>{Promise.resolve().then(t.bind(t,7374))},7374:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var s=t(5155),l=t(2115),r=t(9911);function i(e){let{onSubmit:a=()=>{},isLoading:t=!1}=e,[i,n]=(0,l.useState)({age:"",niveauScolaire:"",objectifApprentissage:"",difficultesSpecifiques:"",tempsDisponible:"15",niveau:"moyen",sujet:"",longueurTexte:"moyen",typeContenu:"narratif",vitesseLecture:"normale",includeGrammaire:!0,includeConjugaison:!0,includeOrthographe:!0}),[o,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(null),h=e=>{let{name:a,value:t,type:s}=e.target;n(l=>({...l,[a]:"checkbox"===s?e.target.checked:t}))};return(0,s.jsxs)("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 overflow-y-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((e,a)=>(0,s.jsx)("div",{className:"absolute w-2 h-2 bg-white/20 rounded-full animate-pulse",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),animationDuration:"".concat(2+3*Math.random(),"s")}},a))}),(0,s.jsxs)("div",{className:"min-h-screen w-full max-w-6xl mx-auto relative z-10 p-4",children:[(0,s.jsx)("div",{className:"text-center mb-12",children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-2xl shadow-lg border border-white/20",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(r.vd0,{className:"w-8 h-8 text-white"}),(0,s.jsx)(r.gt3,{className:"w-3 h-3 text-yellow-300 absolute -top-1 -right-1 animate-spin"})]})}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Dict\xe9e Magique"}),(0,s.jsx)("p",{className:"text-lg text-blue-100",children:"Cr\xe9ez votre exp\xe9rience d'apprentissage personnalis\xe9e"})]})})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"relative bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"relative mr-4",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)(r.x$1,{className:"w-5 h-5 text-white"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"Profil Utilisateur"}),(0,s.jsx)("p",{className:"text-blue-200",children:"Parlez-nous de vous"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDF82"}),"\xc2ge"]}),(0,s.jsx)("input",{type:"number",name:"age",value:i.age,onChange:h,onFocus:()=>u("age"),onBlur:()=>u(null),className:"w-full px-4 py-3 bg-white/10 border rounded-xl text-white placeholder-gray-400 transition-all ".concat("age"===d?"border-blue-400 shadow-md":"border-white/30 hover:border-white/50"),placeholder:"Ex: 12"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDF93"}),"Niveau Scolaire"]}),(0,s.jsxs)("select",{name:"niveauScolaire",value:i.niveauScolaire,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",children:[(0,s.jsx)("option",{value:"",className:"bg-gray-800",children:"S\xe9lectionner votre niveau..."}),(0,s.jsx)("option",{value:"CP",className:"bg-gray-800",children:"CP"}),(0,s.jsx)("option",{value:"CE1",className:"bg-gray-800",children:"CE1"}),(0,s.jsx)("option",{value:"CE2",className:"bg-gray-800",children:"CE2"}),(0,s.jsx)("option",{value:"CM1",className:"bg-gray-800",children:"CM1"}),(0,s.jsx)("option",{value:"CM2",className:"bg-gray-800",children:"CM2"}),(0,s.jsx)("option",{value:"6\xe8me",className:"bg-gray-800",children:"6\xe8me"}),(0,s.jsx)("option",{value:"5\xe8me",className:"bg-gray-800",children:"5\xe8me"}),(0,s.jsx)("option",{value:"4\xe8me",className:"bg-gray-800",children:"4\xe8me"}),(0,s.jsx)("option",{value:"3\xe8me",className:"bg-gray-800",children:"3\xe8me"}),(0,s.jsx)("option",{value:"Seconde",className:"bg-gray-800",children:"Seconde"}),(0,s.jsx)("option",{value:"Premi\xe8re",className:"bg-gray-800",children:"Premi\xe8re"}),(0,s.jsx)("option",{value:"Terminale",className:"bg-gray-800",children:"Terminale"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDFAF"}),"Objectif d'Apprentissage"]}),(0,s.jsx)("input",{type:"text",name:"objectifApprentissage",value:i.objectifApprentissage,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white placeholder-gray-400 hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",placeholder:"Ex: Am\xe9liorer les accords, pr\xe9parer un examen..."})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83E\uDD14"}),"Difficult\xe9s Sp\xe9cifiques"]}),(0,s.jsx)("input",{type:"text",name:"difficultesSpecifiques",value:i.difficultesSpecifiques,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white placeholder-gray-400 hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",placeholder:"Ex: Les homophones, la conjugaison..."})]})]})]}),(0,s.jsxs)("div",{className:"relative bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"relative mr-4",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)(r.T_n,{className:"w-5 h-5 text-white"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"Param\xe8tres Magiques"}),(0,s.jsx)("p",{className:"text-purple-200",children:"Personnalisez votre dict\xe9e"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"⚡"}),"Niveau"]}),(0,s.jsxs)("select",{name:"niveau",value:i.niveau,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",children:[(0,s.jsx)("option",{value:"facile",className:"bg-gray-800",children:"\uD83D\uDFE2 Facile"}),(0,s.jsx)("option",{value:"moyen",className:"bg-gray-800",children:"\uD83D\uDFE1 Moyen"}),(0,s.jsx)("option",{value:"difficile",className:"bg-gray-800",children:"\uD83D\uDD34 Difficile"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCDA"}),"Sujet"]}),(0,s.jsx)("input",{type:"text",name:"sujet",value:i.sujet,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white placeholder-gray-400 hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",placeholder:"Ex: Les animaux, l'histoire..."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCCF"}),"Longueur du Texte"]}),(0,s.jsxs)("select",{name:"longueurTexte",value:i.longueurTexte,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",children:[(0,s.jsx)("option",{value:"court",className:"bg-gray-800",children:"\uD83D\uDCDD Court"}),(0,s.jsx)("option",{value:"moyen",className:"bg-gray-800",children:"\uD83D\uDCC4 Moyen"}),(0,s.jsx)("option",{value:"long",className:"bg-gray-800",children:"\uD83D\uDCD1 Long"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDFAD"}),"Type de Contenu"]}),(0,s.jsxs)("select",{name:"typeContenu",value:i.typeContenu,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",children:[(0,s.jsx)("option",{value:"narratif",className:"bg-gray-800",children:"\uD83D\uDCD6 Narratif"}),(0,s.jsx)("option",{value:"descriptif",className:"bg-gray-800",children:"\uD83C\uDFA8 Descriptif"}),(0,s.jsx)("option",{value:"informatif",className:"bg-gray-800",children:"\uD83D\uDCCA Informatif"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDFB5"}),"Vitesse de Lecture"]}),(0,s.jsxs)("select",{name:"vitesseLecture",value:i.vitesseLecture,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",children:[(0,s.jsx)("option",{value:"lente",className:"bg-gray-800",children:"\uD83D\uDC0C Lente"}),(0,s.jsx)("option",{value:"normale",className:"bg-gray-800",children:"\uD83D\uDEB6 Normale"}),(0,s.jsx)("option",{value:"rapide",className:"bg-gray-800",children:"\uD83C\uDFC3 Rapide"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"⏰"}),"Temps Disponible"]}),(0,s.jsxs)("select",{name:"tempsDisponible",value:i.tempsDisponible,onChange:h,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white hover:border-white/50 focus:border-blue-400 focus:shadow-md transition-all",children:[(0,s.jsx)("option",{value:"10",className:"bg-gray-800",children:"⏱️ 10 minutes"}),(0,s.jsx)("option",{value:"15",className:"bg-gray-800",children:"⏰ 15 minutes"}),(0,s.jsx)("option",{value:"20",className:"bg-gray-800",children:"\uD83D\uDD50 20 minutes"}),(0,s.jsx)("option",{value:"30",className:"bg-gray-800",children:"\uD83D\uDD55 30 minutes"})]})]})]}),(0,s.jsx)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[{key:"includeGrammaire",label:"Grammaire",icon:"\uD83D\uDCDD"},{key:"includeConjugaison",label:"Conjugaison",icon:"\uD83D\uDD04"},{key:"includeOrthographe",label:"Orthographe",icon:"✍️"}].map(e=>(0,s.jsxs)("label",{className:"relative flex items-center space-x-3 p-4 rounded-xl border cursor-pointer transition-all ".concat(i[e.key]?"bg-white/10 border-blue-400":"bg-white/5 border-white/20 hover:border-white/40"),children:[(0,s.jsx)("input",{type:"checkbox",name:e.key,checked:i[e.key],onChange:h,className:"sr-only"}),(0,s.jsx)("div",{className:"w-6 h-6 rounded-lg flex items-center justify-center text-base",children:e.icon}),(0,s.jsx)("span",{className:"text-white font-medium",children:e.label})]},e.key))})]}),(0,s.jsx)("div",{className:"text-center pt-6",children:(0,s.jsx)("button",{type:"submit",disabled:t,onClick:e=>{e.preventDefault(),a(i)},className:"relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl overflow-hidden transition-all ".concat(t?"opacity-75 cursor-not-allowed":"hover:shadow-lg hover:shadow-blue-500/25"),children:(0,s.jsx)("span",{className:"relative flex items-center gap-3",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:"G\xe9n\xe9ration en cours..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.uoG,{className:"text-xl"}),(0,s.jsx)("span",{children:"Cr\xe9er ma Dict\xe9e"})]})})})})]})]})]})}var n=t(1934),o=t(9588),c=t(133),d=t(2178),u=t(5690),h=t(2152),m=t(5273);function x(e){let{audioUrl:a,onComplete:t}=e,[r,i]=(0,l.useState)(!1),[x,p]=(0,l.useState)(0),[b,g]=(0,l.useState)(0),[j,v]=(0,l.useState)(1),[f,w]=(0,l.useState)(!1),[N,y]=(0,l.useState)(""),[D,C]=(0,l.useState)(1),k=(0,l.useRef)(null),S=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(k.current){let e=k.current;e.addEventListener("loadedmetadata",()=>{g(e.duration||60)}),e.addEventListener("timeupdate",()=>{p(e.currentTime||0)}),e.addEventListener("ended",()=>{i(!1)})}},[]);let E=e=>{let a=Math.floor(e/60),t=Math.floor(e%60);return"".concat(a,":").concat(t.toString().padStart(2,"0"))},A=()=>b>0?x/b*100:0;return(0,s.jsxs)("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 overflow-y-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((e,a)=>(0,s.jsx)("div",{className:"absolute w-2 h-2 bg-white/20 rounded-full animate-pulse",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),animationDuration:"".concat(2+3*Math.random(),"s")}},a))}),(0,s.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen w-full max-w-4xl mx-auto relative z-10 p-4 flex flex-col",children:(0,s.jsxs)("div",{className:"flex-1 bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(o.A,{className:"w-6 h-6 text-blue-400"})}),"Dict\xe9e en cours"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-white",children:"Vitesse:"}),(0,s.jsxs)("select",{value:D,onChange:e=>{let a=parseFloat(e.target.value);k.current&&(k.current.playbackRate=a,C(a))},className:"px-3 py-1 bg-white/10 border border-white/30 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,s.jsx)("option",{value:.75,children:"0.75x"}),(0,s.jsx)("option",{value:1,children:"1x"}),(0,s.jsx)("option",{value:1.25,children:"1.25x"}),(0,s.jsx)("option",{value:1.5,children:"1.5x"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-white mb-2",children:[(0,s.jsx)("span",{children:E(x)}),(0,s.jsx)("span",{children:E(b)})]}),(0,s.jsx)("div",{className:"w-full bg-white/20 rounded-full h-1.5",children:(0,s.jsx)(n.P.div,{className:"bg-blue-500 h-1.5 rounded-full",style:{width:"".concat(A(),"%")},initial:{width:0},animate:{width:"".concat(A(),"%")},transition:{duration:.1}})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-6",children:[(0,s.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{k.current&&(k.current.currentTime=0,i(!1))},className:"p-2 text-white hover:bg-white/20 rounded-lg transition-all",title:"Recommencer",children:(0,s.jsx)(c.A,{className:"w-5 h-5"})}),(0,s.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{k.current&&(r?k.current.pause():k.current.play(),i(!r))},className:"p-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-md transition-all",title:r?"Pause":"Lecture",children:r?(0,s.jsx)(d.A,{className:"w-6 h-6"}):(0,s.jsx)(u.A,{className:"w-6 h-6 ml-0.5"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{k.current&&(k.current.muted=!f,w(!f))},className:"p-2 text-white hover:bg-white/20 rounded-lg transition-all",title:f?"Activer le son":"Couper le son",children:f?(0,s.jsx)(h.A,{className:"w-5 h-5"}):(0,s.jsx)(m.A,{className:"w-5 h-5"})}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:f?0:j,onChange:e=>{let a=parseFloat(e.target.value);k.current&&(k.current.volume=a,v(a))},className:"w-20 h-1.5 bg-white/20 rounded-lg appearance-none cursor-pointer slider"})]})]})]})]}),(0,s.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-6",children:(0,s.jsx)("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:(0,s.jsx)("textarea",{ref:S,value:N,onChange:e=>y(e.target.value),placeholder:"\xc9crivez votre dict\xe9e ici...",className:"w-full h-64 px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"})})}),(0,s.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"text-center",children:(0,s.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{t(N)},className:"inline-flex items-center justify-center px-6 py-3 text-base font-medium text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-all",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"w-5 h-5"}),"Terminer la dict\xe9e"]})})})]})}),(0,s.jsx)("audio",{ref:k,src:a})]})}var p=t(8564),b=t(5339),g=t(4861),j=t(646);function v(e){let{score:a,errors:t,correction:l}=e;return(0,s.jsxs)("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 overflow-y-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((e,a)=>(0,s.jsx)("div",{className:"absolute w-2 h-2 bg-white/20 rounded-full animate-pulse",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),animationDuration:"".concat(2+3*Math.random(),"s")}},a))}),(0,s.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen w-full max-w-4xl mx-auto relative z-10 p-4",children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,s.jsxs)(n.P.div,{initial:{scale:.5},animate:{scale:1},transition:{duration:.5,delay:.2},className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-500 rounded-full mb-4",children:(0,s.jsx)(p.A,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"R\xe9sultats"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsxs)("span",{className:"text-5xl font-bold ".concat(a>=80?"text-green-500":a>=60?"text-yellow-500":"text-red-500"),children:[a,"%"]}),(0,s.jsx)("span",{className:"text-lg text-gray-300",children:a>=80?"Excellent !":a>=60?"Bien !":"\xc0 am\xe9liorer"})]})]}),t.length>0&&(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-white mb-3 flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"w-5 h-5 text-red-400"}),"Erreurs \xe0 corriger"]}),(0,s.jsx)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:(0,s.jsx)("ul",{className:"space-y-2",children:t.map((e,a)=>(0,s.jsxs)(n.P.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.4+.1*a},className:"flex items-start gap-2 text-gray-300",children:[(0,s.jsx)(g.A,{className:"w-4 h-4 text-red-400 mt-1 flex-shrink-0"}),(0,s.jsx)("span",{children:e})]},a))})})]}),(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-white mb-3 flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"w-5 h-5 text-green-400"}),"Texte corrig\xe9"]}),(0,s.jsx)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:(0,s.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:l||"Aucune correction disponible"})})]})]})})]})}var f=t(4684);function w(){let[e,a]=(0,l.useState)("form"),[t,r]=(0,l.useState)(""),[n,o]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[u,h]=(0,l.useState)(null),m=async e=>{try{o(!0),console.log("Envoi des donn\xe9es au serveur:",e);let t=await fetch("https://dicte-backend.onrender.com/api/dictation/generate/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Erreur lors de la g\xe9n\xe9ration de la dict\xe9e");let s=await t.json();if(console.log("R\xe9ponse compl\xe8te du serveur:",s),s.audio_url){let e=s.audio_url;console.log("Chemin de l'audio:",e),h(s.id);try{let t=await fetch(e);if(t.ok)console.log("Statut de la v\xe9rification audio:",t.status),r(e),a("player");else throw console.error("Statut de la v\xe9rification audio:",t.status),Error("Erreur lors de la v\xe9rification de l'audio")}catch(e){throw console.error("Erreur lors de la v\xe9rification de l'audio"),console.error("Erreur d\xe9taill\xe9e:",e),e}}else throw console.error("Pas de fichier audio dans la r\xe9ponse"),Error("Pas de fichier audio dans la r\xe9ponse")}catch(e){console.error("Erreur:",e),alert("Une erreur est survenue lors de la g\xe9n\xe9ration de la dict\xe9e")}finally{o(!1)}},p=async e=>{try{if(o(!0),!u)throw Error("ID de dict\xe9e manquant");let t=await fetch("https://dicte-backend.onrender.com/api/dictation/correct/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_text:e,dictation_id:u})});if(!t.ok)throw Error("Erreur lors de la correction de la dict\xe9e");let s=await t.json();d(s),a("results")}catch(e){console.error("Erreur:",e),alert("Une erreur est survenue lors de la correction de la dict\xe9e")}finally{o(!1)}};return(0,s.jsx)(f.A,{children:(0,s.jsx)("main",{className:"min-h-screen bg-gray-100 py-8",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:["form"===e&&(0,s.jsx)(i,{onSubmit:m,isLoading:n}),"player"===e&&t&&(0,s.jsx)(x,{audioUrl:t,onComplete:p}),"results"===e&&c&&(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(v,{...c}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("button",{onClick:()=>{a("form"),r(""),d(null)},className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Nouvelle Dict\xe9e"})})]})]})})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[711,493,441,684,358],()=>a(6051)),_N_E=e.O()}]);